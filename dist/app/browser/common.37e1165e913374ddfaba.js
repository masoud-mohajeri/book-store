(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"74mu":function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return s}),r.d(t,"d",function(){return c});const s=(e,t)=>null!==t.closest(e),n=(e,t)=>"string"==typeof e&&e.length>0?Object.assign({"ion-color":!0,[`ion-color-${e}`]:!0},t):t,i=e=>{const t={};return(e=>void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter(e=>null!=e).map(e=>e.trim()).filter(e=>""!==e):[])(e).forEach(e=>t[e]=!0),t},o=/^[a-z][a-z0-9+\-.]*:/,c=async(e,t,r,s)=>{if(null!=e&&"#"!==e[0]&&!o.test(e)){const n=document.querySelector("ion-router");if(n)return null!=t&&t.preventDefault(),n.push(e,r,s)}return!1}},A2gu:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});var s=r("Ke8Y");const n=async(e,t,r,n,i)=>{if(e)return e.attachViewToDom(t,r,i,n);if("string"!=typeof r&&!(r instanceof HTMLElement))throw new Error("framework delegate is missing");const o="string"==typeof r?t.ownerDocument&&t.ownerDocument.createElement(r):r;return n&&n.forEach(e=>o.classList.add(e)),i&&Object.assign(o,i),t.appendChild(o),await new Promise(e=>Object(s.c)(o,e)),o},i=(e,t)=>{if(t){if(e)return e.removeViewFromDom(t.parentElement,t);t.remove()}return Promise.resolve()}},h3R7:function(e,t,r){"use strict";r.d(t,"a",function(){return s});const s={bubbles:{dur:1e3,circles:9,fn:(e,t,r)=>{const s=e*t/r-e+"ms",n=2*Math.PI*t/r;return{r:5,style:{top:9*Math.sin(n)+"px",left:9*Math.cos(n)+"px","animation-delay":s}}}},circles:{dur:1e3,circles:8,fn:(e,t,r)=>{const s=t/r,n=e*s-e+"ms",i=2*Math.PI*s;return{r:5,style:{top:9*Math.sin(i)+"px",left:9*Math.cos(i)+"px","animation-delay":n}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(e,t)=>({r:6,style:{left:9-9*t+"px","animation-delay":-110*t+"ms"}})},lines:{dur:1e3,lines:12,fn:(e,t,r)=>({y1:17,y2:29,style:{transform:`rotate(${30*t+(t<6?180:-180)}deg)`,"animation-delay":e*t/r-e+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(e,t,r)=>({y1:12,y2:20,style:{transform:`rotate(${30*t+(t<6?180:-180)}deg)`,"animation-delay":e*t/r-e+"ms"}})}}},pX2f:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var s=r("2atR"),n=r("iWo5"),i=r("qULd");const o=(e,t)=>{let r,o;const c=(e,s,n)=>{if("undefined"==typeof document)return;const i=document.elementFromPoint(e,s);i&&t(i)?i!==r&&(u(),a(i,n)):u()},a=(e,t)=>{r=e,o||(o=r);const n=r;Object(s.f)(()=>n.classList.add("ion-activated")),t()},u=(e=!1)=>{if(!r)return;const t=r;Object(s.f)(()=>t.classList.remove("ion-activated")),e&&o!==r&&r.click(),r=void 0};return Object(n.createGesture)({el:e,gestureName:"buttonActiveDrag",threshold:0,onStart:e=>c(e.currentX,e.currentY,i.a),onMove:e=>c(e.currentX,e.currentY,i.b),onEnd:()=>{u(!0),Object(i.e)(),o=void 0}})}},qULd:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return n}),r.d(t,"d",function(){return a}),r.d(t,"e",function(){return c});const s={getEngine(){const e=window;return e.TapticEngine||e.Capacitor&&e.Capacitor.isPluginAvailable("Haptics")&&e.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(e){const t=this.getEngine();if(!t)return;const r=this.isCapacitor()?e.style.toUpperCase():e.style;t.impact({style:r})},notification(e){const t=this.getEngine();if(!t)return;const r=this.isCapacitor()?e.style.toUpperCase():e.style;t.notification({style:r})},selection(){this.impact({style:"light"})},selectionStart(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionStart():e.gestureSelectionStart())},selectionChanged(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionChanged():e.gestureSelectionChanged())},selectionEnd(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionEnd():e.gestureSelectionEnd())}},n=()=>{s.selection()},i=()=>{s.selectionStart()},o=()=>{s.selectionChanged()},c=()=>{s.selectionEnd()},a=e=>{s.impact(e)}},t1Rf:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var s=r("2Vo4"),n=r("IzEk"),i=r("lJxs"),o=r("8Y7J"),c=r("7S2x"),a=r("IYfF"),u=r("C7gO"),d=r("I/3d");let l=(()=>{class e{constructor(e,t,r,n){this.shcardService=e,this.authService=t,this.bookService=r,this.afs=n,this.orders=[],this.orderEmitter=new s.a(this.orders),this.paymentOk=new s.a(!0),this.shCard=[]}payOrder(e,t){const r=this.orders.findIndex(t=>t.bookId===e);this.authService.userInfo.subscribe(e=>{this.user=e}),this.orders[r].status="PAIED",this.orders[r].customerAssredd=this.user.address,this.orders[r].customeName=this.user.name,this.orders[r].count=t,this.bookService.decreassInvestory(this.orders[r].bookId,t),console.log(this.orders[r]),this.orderEmitter.next(this.orders),this.afs.collection("Orders").add(this.orders[r]).then(e=>{console.log("paied successfully"),console.log(e)}).catch(e=>{console.log("couldnt pay"),console.log(e)})}getAllOrdersUser(){this.orders=[],this.shcardService.cardListEmitter.subscribe(e=>{this.shCard=e});let e=[];return new Promise((t,r)=>{for(let s of this.shCard)new Promise((e,t)=>{this.bookService.returnBookById(s).subscribe(t=>{e(t)})}).then(t=>{e.push({bookId:s,count:1,publisher:t.publisher,status:"CARD"})}).catch(e=>{console.log("err"),console.log(e)});this.orders=e,this.orderEmitter.next(this.orders),t(this.orders)})}deleteOrder(e){const t=this.orders.findIndex(t=>t.bookId===e);this.orders.splice(t,1),this.orderEmitter.next(this.orders)}getPublisherOrder(){return this.authService.userInfo.subscribe(e=>{this.user=e}),new Promise((e,t)=>{this.afs.collection("Orders",e=>e.where("publisher","==",this.user.name).where("status","==","PAIED")).snapshotChanges().pipe(Object(n.a)(1),Object(i.a)(e=>e.map(e=>Object.assign(Object.assign({},e.payload.doc.data()),{id:e.payload.doc.id})))).subscribe(t=>{e(t)})})}sendPaiedOrder(e,t){return this.afs.doc("Orders/"+e).update({status:"SENT",postId:t,paymentDate:Date.now()})}getAllOrders(){return this.afs.collection("Orders").valueChanges().subscribe(e=>{this.orderEmitter.next(e)}),this.afs.collection("Orders").valueChanges()}getPaiedOrdersUser(){return this.authService.userInfo.subscribe(e=>{this.user=e}),this.afs.collection("Orders",e=>e.where("customeName","==",this.user.name)).valueChanges()}}return e.\u0275fac=function(t){return new(t||e)(o.cc(c.a),o.cc(a.a),o.cc(u.a),o.cc(d.a))},e.\u0275prov=o.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);